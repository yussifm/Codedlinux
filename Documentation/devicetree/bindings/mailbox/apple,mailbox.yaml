# SPDX-License-Identifier: GPL-2.0 OR BSD-2-Clause
%YAML 1.2
---
$id: http://devicetree.org/schemas/mailbox/apple,mailbox.yaml#
$schema: http://devicetree.org/meta-schemas/core.yaml#

title: Apple Mailbox

maintainers:
  - Sven Peter <sven@svenpeter.dev>

description:
  The Apple ASC mailbox consists of two FIFOs used to exchange 64+32 bit
  messages between the main CPU and a co-processor. Multiple instances
  of this mailbox can be found on Apple SoCs.
  Various clients implement different IPC protocols based on these simple
  messages and shared memory buffers.
  One of the two FIFOs is used to send data to a co-processor while the other
  FIFO is used for the other direction.
  FIFO Empty/Not-empty interrupts are available.

properties:
  compatible:
    enum:
      - apple,t8103-asc-mailbox
      - apple,t8103-m3-mailbox

  reg:
    maxItems: 1

  interrupts:
    minItems: 4

  interrupt-names:
    minItems: 4
    items:
      - const: send-empty
      - const: send-not-empty
      - const: recv-empty
      - const: recv-not-empty

  clocks:
    description:
      Reference to the clock gate phandle(s) if required for this mailbox.
      Optional since not all mailboxes are attached to a clock gate.

  "#mbox-cells":
    const: 0

required:
  - compatible
  - reg
  - interrupts
  - interrupt-names
  - "#mbox-cells"

additionalProperties: false

examples:
  - |
        mailbox@77408000 {
                compatible = "apple,t8103-asc-mailbox";
                reg = <0x77408000 0x4000>;
                interrupts = <1 583 4>, <1 584 4>, <1 585 4>, <1 586 4>;
                interrupt-names = "send-empty", "send-not-empty",
                 "recv-empty", "recv-not-empty";
                #mbox-cells = <0>;
        };
